/**
* Warehouse related module
*
* @category    YanMalinovsky
* @package     YanMalinovsky_Warehouse
* @copyright   Copyright (c) 2016 Yan Malinovsky
* @license     http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
*/

Техническое задание:

Необходимо создать одностраничное веб-приложение. На странице таблица остатков продуктов по складами и форма для
загрузки CSV файла следующего вида:

product_name,qty,warehouse
"Product 1",5,WH1
"Product 2",5,WH1
"Product 3",-2,WH2
"Product 4",7,WH2
"Product 4",-3,WH1

где:
product_name - название продукта
qty - количество, доступное на складе
warehouse - название склада

Таблица на странице из трёх колонок:
Product name - название продукта
Qty - общее количество на всех складах
Warehouses - список складов, через запятую, на которых есть продукт

Таблица всегда отображает текущее состояние складов. Файлы, загружаемые через форму, содержат движения продуктов, а не
абсолютное количество продуктов на складах. При первом запуске подразумевается, что ни на одном из складов нет ни
одного продукта. При загрузке каждого следующего файла общее количество продукта по складами корректируется данными из
файла. Как только количество продукта снижается до 0 и меньше на определённом складе, он пропадает из списка складов,
на которых размещён продукт. Как только общее количество продукта снижается до 0 и меньше, он пропадает из списка
продуктов.

Например:
Первое посещение страницы. Продуктов нет ни на одном складе. Таблица с продуктами пустая.

Загружаем CSV файл:
product_name,qty,warehouse
"Product 1",5,WH1
"Product 2",5,WH1

При обновлении страницы после загрузки таблица выглядит так:
Product name | Qty | Warehouses
Product 1 | 5 | WH1
Product 2 | 5 | WH1

Загружаем еще один CSV файл:
product_name,qty,warehouse
"Product 1",-2,WH1
"Product 2",5,WH1
"Product 2",1,WH2

При обновлении страницы после загрузки таблица выглядит так:
Product name | Qty | Warehouses
Product 1 | 3 | WH1
Product 2 | 11 | WH1,WH2

Загружаем еще один CSV файл:
product_name,qty,warehouse
"Product 1",-3,WH1
"Product 2",-1,WH2

При обновлении страницы после загрузки таблица выглядит так:
Product name | Qty | Warehouses
Product 2 | 10 | WH1